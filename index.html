<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>Keeping an exotic pet in your home!</title>
    <meta charset="utf-8" />
    <meta name="author" content="Emma Rand" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/rladies.css" rel="stylesheet" />
    <link href="libs/remark-css/rladies-fonts.css" rel="stylesheet" />
    <script src="libs/kePrint/kePrint.js"></script>
  </head>
  <body>
    <textarea id="source">





background-image: url(pics/useR2019.png)
background-position: 4% 0%
background-size: 250px


class: inverse, right, bottom

# Keeping an exotic pet in your home!
## Taming Python to live in RStudio because&lt;br&gt;sometimes the best language is both!
&lt;br&gt;
### Emma Rand&lt;br&gt;emma.rand@york.ac.uk&lt;br&gt;&lt;br&gt;Materials:   https://github.com/3mmaRand/useR2019_tutorial


---
class: center, middle

# But first.....Who am I? &lt;br&gt; and some Thank yous!

.footnote[
Materials:   https://github.com/3mmaRand/useR2019_tutorial
]
---


# Who I am?

.pull-left[

![York Lower Petergate with the cathedral in the background](https://upload.wikimedia.org/wikipedia/commons/thumb/f/fe/Lower_Petergate_in_York%2C_England.jpg/324px-Lower_Petergate_in_York%2C_England.jpg)

]

.pull-right[

Lecturer (Assistant Professor) University of York, UK

some other stuff
.footnote[
Materials:   https://github.com/3mmaRand/useR2019_tutorial
]
]

---
background-image: url(pics/member_institute_logos.png)
background-position: 95% 7%

# Thank yous!

## To the local organisation committee
&lt;small&gt;
* Nathalie Vialaneix (chair), MIAT, INRA  
* S√©bastien D√©jean (vice-chair), Institut de Math√©matiques de Toulouse, Universit√© Toulouse 3 Paul Sabatier  
* Anne Ruiz-Gazen (vice-chair), Toulouse School of Economics, Universit√© Toulouse 1 Capitole  
* Heather Turner (vice-chair), statistical consultant and associate fellow of the Statistics Department at the University of Warwick  
* Aurore Archimbaud, Toulouse School of Economics  
* Christophe Bontemps, Toulouse School of Economics, INRA  
* Robert Faivre, MIAT, INRA  
* Xavier Gendre, Institut de Math√©matiques de Toulouse, Universit√© Toulouse 3 Paul Sabatier  
* Thibault Laurent, Toulouse School of Economics, CNRS  
* √âlise Maign√©, Observatoire du D√©veloppement Rural, INRA  
* Pierre Neuvial, Institut de Math√©matiques de Toulouse, CNRS  
* R√©mi Servien, InTheRes, INRA  
* Matthias Zytnicki, MIAT, INRA  
&lt;/small&gt;
.footnote[
Materials:   https://github.com/3mmaRand/useR2019_tutorial
]
---
# Thank yous! 

## For funding

.pull-left[
To the organisers and their sponsers

![useR2019 logo](pics/useR2019.png)


]

.pull-right[


![r consortium logo](pics/r_consortium.png)

My institution  

![University of York logo](pics/UoY-logo.png)

]

.footnote[
Materials:   https://github.com/3mmaRand/useR2019_tutorial
]
---
background-image: url(pics/leila.jpg)
background-position: 90% 50%
background-size: 400px
# Thank yous! 

## Leila Khajavi

.pull-left[

Leila is an American pursuing her PhD in Bioinformatics here in Toulouse, affiliated with both MIAT (INRA) and CPTP (INSERM).

She is very kindly giving her time here today to help out and has already contributed to the session by going through the material and giving some feedback.

Any errors that remain are mine.

]


.footnote[
Materials:   https://github.com/3mmaRand/useR2019_tutorial
]
---
# Thank yous! 
## Everyone here for coming!

.footnote[
Materials:   https://github.com/3mmaRand/useR2019_tutorial
]
---
background-image: url(https://upload.wikimedia.org/wikipedia/commons/f/f8/Python_logo_and_wordmark.svg)
background-position: 95% 95%
background-size: 250px

# Why `reticulate`?

You finally found the **perfect** solution to a data problem!

üòÅ

.footnote[
Materials:   https://github.com/3mmaRand/useR2019_tutorial
]
--

but it's written in Python  

üò¨

--

You're collaborating with some great people

üòÅ

--

but they mainly use Python!  

üò¨

You want to collaborate more easily and seamlessly! 

---
# Why `reticulate`?

You could move to the darkside üêç...

--

But you're familiar üíô with R...

![R logo](pics/R_logo.png)


.footnote[
Materials:   https://github.com/3mmaRand/useR2019_tutorial
]
---

# Why `reticulate`?

But you're familiar with R  
**and very at home in RStudio...**  
&amp;nbsp;  
&amp;nbsp;  
&amp;nbsp;  

![cartoon house labelled RStudio](pics/house.png)

.footnote[
Materials:   https://github.com/3mmaRand/useR2019_tutorial
]

---
# Why `reticulate`?

But you're familiar with R  
and very at home in RStudio  
**because it's comfortable...**  
&amp;nbsp;  
&amp;nbsp;  

![cartoon house labelled RStudio with sleeping cat](pics/house_cat.png)

.footnote[
Materials:   https://github.com/3mmaRand/useR2019_tutorial
]
---
# Why `reticulate`?

But you're familiar with R  
and very at home in RStudio  
because it's comfortable  
**and has many tools you like...**  
&amp;nbsp;  

![cartoon house labelled RStudio with sleeping cat and tidyverse hex stickers](pics/house_cat_tools.png)

.footnote[
Materials:   https://github.com/3mmaRand/useR2019_tutorial
]
---

# Why `reticulate`?

But you're familiar with R  
and very at home in RStudio  
because it's comfortable  
and has many tools you like  
**and the sun always shines!**  

![cartoon house labelled RStudio with sleeping cat and tidyverse hex stickers in the sun](pics/house_cat_tools_sun.png)
.footnote[
Materials:   https://github.com/3mmaRand/useR2019_tutorial
]

---
# Why `reticulate`?

So even though Python has some great tools...  
&amp;nbsp;  
&amp;nbsp;  
&amp;nbsp;  
&amp;nbsp;  

![cartoon house labelled RStudio with sleeping cat and tidyverse hex stickers in the sun](pics/house_cat_tools_sun.png)![cartoon house labelled python](pics/house_python.png)

.footnote[
Materials:   https://github.com/3mmaRand/useR2019_tutorial
]

---
# Why `reticulate`?

So even though Python has some great tools  
**and some very cool people...**  
&amp;nbsp;  
&amp;nbsp;  
&amp;nbsp;  

![cartoon house labelled RStudio with sleeping cat and tidyverse hex stickers in the sun](pics/house_cat_tools_sun.png)![cartoon house labelled python with cool cat](pics/house_python_cat.png)

.footnote[
Materials:   https://github.com/3mmaRand/useR2019_tutorial
]

---
# Why `reticulate`?


So even though Python has some great tools  
and some very cool people  
**you don't want to move in!**  
&amp;nbsp;  
&amp;nbsp;  

![cartoon house labelled RStudio with sleeping cat and tidyverse hex stickers in the sun](pics/house_cat_tools_sun2.png)![cartoon house labelled python with cool cat](pics/house_python_cat.png)

.footnote[
Materials:   https://github.com/3mmaRand/useR2019_tutorial
]

---

# Why `reticulate`?

Thankfully, there's Reticulate

JJ Allaire, Kevin Ushey and Yuan Tang (2018). reticulate: Interface to 'Python'. R package version  1.10. https://CRAN.R-project.org/package=reticulate  

&amp;nbsp;  

![RStudio and Pythonhouses joined by the reticulate package logo](pics/house_reticulate.png)


.footnote[
Materials:   https://github.com/3mmaRand/useR2019_tutorial
]

---

class: inverse, center, middle

# Overview

---

# Overview

* Very brief background to R and Python  
* Broad overview of [Reticulate](https://rstudio.github.io/reticulate)  
  Why use it, what are its key features, how can it be used, set up recommendations  
* Aside: A little basic Python  
  Assignment, data types and structures, importing modules, methods, some differences an R user will notice  
* Examples of using `reticulate`  
  * Interactively using `repl_python()`  
  * Sourcing  Python scripts
  * Importing Python modules 
  * Complete integration in R markdown  

.footnote[
Materials:   https://github.com/3mmaRand/useR2019_tutorial
]
---

# Background

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt;   &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; R &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Python &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Released &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1995 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1991 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Author &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Ihaka &amp;amp; Gentleman, Chambers &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; van Rossum &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Purpose &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; User-friendly data analysis and visualisation for 'non-programmers' &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Object-oriented,
                                     Readable, general purpose programming language &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Users most likely to be &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Statistics graduates,  Academics, data scientists &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Computer Science graduates, Software engineers &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Features &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; R Markdown, tidyverse &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Integration with web aps, Unified Machine learning API &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

.footnote[
Materials:   https://github.com/3mmaRand/useR2019_tutorial
]
---

# Why use Reticulate

## Speed up your workflow

* Problem solving is the defining feature of a data scientist
* Language should be secondary
* Choice of language driven by early impressions of the data. Change in direction later means lost time in translating

## Facilitate collaboration

* Allows you to leverage the skills expertise of the whole team
* Solves the hardest problem in Data Science - People&lt;sup&gt;1&lt;/sup&gt;. 
* Many Data Scientists know both and they are happier&lt;sup&gt;2&lt;/sup&gt;

.footnote[
[1] Mangano, 2019  
[2] Stack Overflow Developers' Survey, NanoMathius, 2018  
]

---

# Reticulate


Exciting implementations

---
# Reticulate

## Key features

1. Ability to call Python from R  

2. Translation between R objects and Python objects  
 
   Can be automatic or explicit  
   RStudio 1.2

3. Flexible binding to different Python environments  


---
# Reticulate

## Alllows you to use Python in four ways:  

1. Interactively in the console: `repl_python()`  

2. Sourcing Python scripts  

3. Importing Python modules  

4. In R Markdown documents  

Methods 2, 3 and 4 are likely to be the ones you would use in a data analysis project. 

However, we will start with `repl_python()` to build our understanding.

---
# Reticulate

## Ingredients

You will need

* [RStudio 1.2](https://www.rstudio.com/products/rstudio/)  
   1.2 is needed for some of the most useful features

--

* Python  
  [Anaconda 3](https://www.anaconda.com/distribution/) 
    recommended for data science, includes many useful libraries.

--

* The `reticulate` package. I recommend  using the development version
   
   ```r
   devtools::install_github("rstudio/reticulate")  
   ```

.centre[
![reticulate-logo](pics/reticulated_python.png)
]


---
background-image: url(https://upload.wikimedia.org/wikipedia/en/c/cd/Anaconda_Logo.png)
background-position: 10% 30%
background-size: 280px

# This one

--
.pull-right[
![snake](pics/anconda-1.jpg) **Not this one**
]

--


![nicki_minaj](pics/nicki.jpg)  

**And definitely not this one!**   
Google is not always your friend!


---

# Reticulate

## You will also need


*  Any other Python modules your Python code depends on (not needed here)

--

* Probably / possibly.....to set to the QT_PLUGIN_PATH environment variable.

In windows: Control Panel -&gt; System and Security -&gt; System then

Advanced System settings -&gt; Environment variables

I have set mine to 
C:\Program Files\RStudio\bin\plugins; C:\ProgramData\Anaconda3\Library\plugins


.footnote[
If you can describe and resolve in a better but still minimal way, please get in touch!
]
---

# Reticulate

## In windows: QT_PLUGIN_PATH environment variable

![ QT_PLUGIN_PATH environment variable in Advanced System settings](pics/env_variables.png)

---
# Reticulate

## In windows: QT_PLUGIN_PATH environment variable

If you get this error: 

.pull-left[
**This application has failed to start because it could not find or load the qt platform plugin "windows" in "" **
]

.pull-right[
![](pics/QT_error.png)
]

Setting the QT_PLUGIN_PATH environment variable as on the previous slide should fix it.

.footnote[
If you can describe and resolve in a better but still minimal way, please get in touch!
]

---

class: inverse, center, middle

# A little Python (needs finishing)

---
background-image: url(pics/cute-snake.jpg)
background-position: 95% 7%


# Python fundamentals
Suppose you wanted to created an array of 5 numbers. 

In R you might do this as:

```r
r_array &lt;- c(4, 5, 1, 6, 8)
```

--

In Python you might use a list&lt;sup&gt;1&lt;/sup&gt;

A list is created like this:

```python
python_list = [4, 5, 1, 6, 8]
```

.footnote[
[1] Python doesn't have a native array data structure but it has the list.   
]

--
Python uses `=` for assignment

---
background-image: url(pics/cute-snake.jpg)
background-position: 95% 7%


# Python fundamentals

Python lists differ from R vectors and arrays. 

For example:


```python
python_list *2
[4, 5, 1, 6, 8, 4, 5, 1, 6, 8]
```

--

Instead you might use the [NumPy package](http://www.numpy.org/)&lt;sup&gt;1&lt;/sup&gt;. NumPy arrays do behave like R vectors/arrays.

.footnote[
[1] NumPy is the fundamental package for scientific computing with Python.
]

---
background-image: url(pics/cute-snake.jpg)
background-position: 95% 7%


# Python fundamentals


You need to `import` NumPy, then use it's array() function.

The Python code looks like this:

```python
import numpy as np
python_array = np.array([4, 5, 1, 6, 8])
```

--
`import` in Python is the equivalent of `library()` in R


......add import as and from

---
background-image: url(pics/cute-snake.jpg)
background-position: 95% 7%

# Python fundamentals

  
briefly
attributes, methods, functions  

some are
function(object)

mostly object.attribute or object.method()

---

class: inverse, center, middle

# How: Using Python in the console
## `reticulate::repl_python()`
---

# Using Python in the console

## Steps

We are going to use Python interactively in the console.  

We will  
* Start a Python session from our R session  
* Create a NumPy array  
* Use the NumPy array  
  * find its size (an attribute)   
  * calculate its mean (a method)  
* End the Python session  
* Access the NumPy array from our R session  
    
---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# Using Python in the console

We are going to be moving between Python and R sessions.

Which could get confusing!

--

What session you are in **at the start of a slide** is indicated like this:

.pull-left[

## üêç _Sub-heading_
You are working interactively with python and your prompt should look like this: 

```r
&gt;&gt;&gt;
```
You may **finish** the slide in an R session
]

--
.pull-right[

## üíô _Sub-heading_
You are working interactively with R and your prompt should look like this:

```r
&gt;
```
You may **finish** the slide in a Python session
]


---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# Using Python in the console

## üíô Start a Python session

Load the reticulate package

```r
library(reticulate)
```
--

And use the function `repl_python()`:


```r
&gt;  repl_python() 
Python 3.6.5 (C:\Apps\ANACON~1\python.exe)
Reticulate 1.10 REPL -- A Python interpreter in R.
&gt;&gt;&gt;  
```

---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# Using Python in the console

## üêç repl_python()


```r
&gt;  repl_python() 
*Python 3.6.5 (C:\Apps\ANACON~1\python.exe)
*Reticulate 1.10 REPL -- A Python interpreter in R.
&gt;&gt;&gt;  
```

* You get a message to tell you what version of Python you're using and where it is  

---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# Using Python in the console

## üêç repl_python()


```r
&gt;  repl_python() 
Python 3.6.5 (C:\Apps\ANACON~1\python.exe)
Reticulate 1.10 REPL -- A Python interpreter in R.
*&gt;&gt;&gt;  
```

* You get a message to tell you what version of Python you're using and where it is  

* `&gt;&gt;&gt;` indicates the Python prompt  


---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# Using Python in the console

## üêç Make a NumPy array

Import the [NumPy package](http://www.numpy.org/)

```r
&gt;&gt;&gt; import numpy as np
&gt;&gt;&gt; 
```
--
and create an array in the console

```r
&gt;&gt;&gt; python_array = np.array([4, 5, 1, 6, 8])
&gt;&gt;&gt; 
```

--
### Success! üéá 

---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# Using Python in the console

## Oh! üòï
But nothing appears in your R environment!
  
![](pics/empty_env.png)

---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# Using Python in the console

## üêç Where is our NumPy array?
Can Python can find it? 
##üîç

--


```r
&gt;&gt;&gt; python_array
array([4, 5, 1, 6, 8])
&gt;&gt;&gt;
```
--
## üëç üôå

Great, the Python session can see it!


---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# Using Python in the console

## üêç Work with a NumPy array

Check the object type of `python_array`:


```r
&gt;&gt;&gt; type(python_array)
&lt;class 'numpy.ndarray'&gt;
&gt;&gt;&gt; 
```

--

Find the size of `python_array` with:


```r
&gt;&gt;&gt; python_array.size
5
&gt;&gt;&gt;
```

--

`size` is an *attribute* of NumPy arrays. 

---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# Using Python in the console


## üêçWork with a NumPy array

Find the mean of `python_array`


```r
&gt;&gt;&gt; python_array.mean()
4.8
&gt;&gt;&gt;
```


---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# Using Python in the console

## üêç Bye bye Python

Let's exit Python

```r
&gt;&gt;&gt; exit
&gt;
```

---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# Using Python in the console

## üíô Hello R

&amp;nbsp;


```r
&gt;&gt;&gt; exit
*&gt;
```

The R prompt is returned
---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# Using Python in the console

## üíô Now where is `python_array`?

.pull-left[
![](pics/empty_env.png) 
]

.pull-right[
Our environment is still empty
]

--

But we **can** access the Python object using `py$...`


```r
&gt; py$python_array
[1] 4 5 1 6 8
```

---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# Using Python in the console

## üíô Accessing python-created objects

And we have normal command completion so typing `py$` followed by the TAB key ‚≠æ will list the available python objects.


![image of command completion for py$ showing np, python_array, r, R, sys](pics/command_completion2.png)

--

Notice we have more than `python_array`. We will return to this in a few slides.
---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# Using Python in the console

## üíô Accessing python-created objects

`reticulate` makes these python-created objects behave how you expect them to in R.


```r
&gt; py$python_array * 2
[1]  8 10  2 12 16
```


```r
&gt; py$python_array * py$python_array
[1] 16 25  1 36 64
```

---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# Using Python in the console

## üíô R functions on python-created objects

They behave the way you expect them to because they are converted R objects
when used!



```r
&gt; class(py$python_array)
[1] "array"
```
`py$python_array` is a one-dimensional array

numpy.ndarray `\(\rightarrow\)` array

And look! üëÄ
We can use R functions on python-created objects


---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# Using Python in the console

## üíô R functions on python-created objects

The mean...


```r
&gt; mean(py$python_array)
[1] 4.8
```
... and length of the array

```r
&gt; length(py$python_array)
[1] 5
```


---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# Using Python in the console

## üíô R functions on python-created objects

You can assign the python object explicitly


```r
&gt; r_array &lt;- py$python_array
```

![the r environment showing the newly created r_array](pics/r_env.png)
---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# Using Python in the console

## üíô Python methods on python-created objects

Remember this?
![image of command completion for py$ showing np, python_array, r, R, sys](pics/command_completion2.png)

We have access to the `np` object which results from importing `NumPy` as `np` in our Python session.

This gives us access to all the NumPy attributes and methods.


---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# Using Python in the console

## üíô Python methods on python-created objects

.pull-left[

üêç In Python `np` attributes are applied by following the object with a dot: 

_`object_name.attribute_name`_

For example, we found the size of `python_array` with:


```r
&gt;&gt;&gt; python_array.size
5
```
]

--
.pull-right[

üíô In R we access and apply `np` attributes in a R like way: 

`py$np$` _`attribute_name(object_name)`_

So to use the size attribute on `py$python_array`:


```r
&gt; py$np$size(py$python_array)
[1] 5
```
]

--
 
**This would be a strange thing to do!** 

but I found it helped me understand the _reticulation_!
---

background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# Using Python in the console

## Why strange??

Because if you already have a python-created object on which you wanted to use some Python methods before doing further work in R, you would more naturally

* Use those methods in Python in a Python way  
* Then access the result in R for further work  

--

Than
* access the object in R
* apply python methods to a python object in an R-like way in an R session
* Then do your further work

---
class: inverse, center, middle

# How: Using Python in R Markdown

## 

---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# How: Using Python in R Markdown

## Aim

You are going to write your own `reticulate` tutorial by combining your own notes and investigations with the code given in the slides.

The tutorial is in two parts:
* The first part of the tutorial aims to develop our baseline understanding of the link between the R and Python sessions and running code chunks interactively. We will pass simple objects between sessions more than you would normally just for demomstration purposes
* The second part covers the importing, modelling and visualisation of processed audio data.

The tutorial is "Classification of Audio segments by instrument: A Tutorial on using the R package reticulate to integrate R and Python."

You are aiming for something like this: [Classifiying_music.html](music_ml/Classifiying_music.html)

---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# How: Using Python in R Markdown

## The data

We are going to work with some data derived from 9 pieces of music. Three examples are:

* [Chopin - Ballade No. 1 in G Minor](https://www.youtube.com/watch?v=Zj_psrTUW_w) 
* [Corelli - Sonata da Chiesa, Op. 1 No. 1 in F major](https://www.youtube.com/watch?v=0fLbzkBRywU)
* [Mozart - Sonata in F major for piano and violin K 376](https://www.youtube.com/watch?v=iOq_lZWD8Lg)


The example and the original Python code to process the audio files and carry out the machine learning analysis methods are by Michael Knight, University of Bristol. 
 
Each of the pieces of music has been segmented into 5-second segments each of which has 5000 features. The features represent the apodised power spectrum of a 5-second segment. 

We will try to classify these segments.  


---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# How: Using Python in R Markdown

## The data

Upto 100 segments were taken from each audio file although there are fewer for pieces shorter than 500 seconds.

&lt;table class="table" style="font-size: 13px; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; Instrument &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Piece &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Number of segments &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Piano &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 01 Ballade No. 1, Op. 23.m4a &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 100 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Piano &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1-01 Sonata No. 1 In F Sharp Minor, Op. 11_ I. Introduzione. un Poco Adagio ,Allegro Vivace.m4a &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 100 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Piano &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 5-01 Beethoven_ Piano Sonata No. 14 in C-Sharp Minor, Op. 27 No. 2, 'Moonlight'_ I. Adagio sostenuto.m4a &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 74 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Piano &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 9-05 Beethoven_ Piano Sonata No. 29 in B-Flat Major, Op. 106, 'Hammerklavier'_ I. Allegro.m4a &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 100 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Violin &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 05 No.2 in A major RV 31_ I. Preludio a Capriccio. Presto.m4a &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 14 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Violin &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1-01 Sonata da chiesa a tre in F Major, Op. 1, No. 1_ I. Grave.m4a &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 15 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Violin &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1-02 Sonata da chiesa a tre in F Major, Op. 1, No. 1_ II. Allegro.m4a &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Violin &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 24 No.11 in D major RV 9_ II. Fantasia. Presto.m4a &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Violin and Piano &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 3-01 Sonata for Piano and Violin in F, K. 376_ I. Allegro.m4a &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 59 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# How: Using Python in R Markdown

## The data

There are two xlsx files for each piece.

* xxxxxx_segments.xlsx  
  has the segments in rows and the features in columns
* xxxxxx_SegmentInfo.xlsx  
  has the metadata for each segment: the name of the piece, the instrument label on the piece, the start and end time of the segment.  

There are 496 segments in total of which 374 are from piano pieces and 63 are from violin pieces. The remaining 59 pieces are from Mozart's  Sonata piano and violin.


---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# How: Using Python in R Markdown

## Let's get started...organising


Start a new project&lt;sup&gt;1&lt;/sup&gt;  called "music_ml"

File | New Project

.footnote[
[1] New to projects? [RStudio: Using Projects](https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects)
]

--

Make three folders in your music_ml project folder called

"Piano"  
"Violin"  
"Violin_and_Piano"  


--

Download the files from [github](https://github.com/3mmaRand/useR2019_tutorial/tree/master/music_ml)

---

background-image: url(pics/rmarkdown.png)
background-position: 95% 5%
background-size: 100px

# How: Using Python in R Markdown

## What is R Markdown

### Live demo
May not be needed depending on the audience responses from earlier.


Just watch for a while....

---

background-image: url(pics/rmarkdown.png)
background-position: 95% 5%
background-size: 100px

# How: Using Python in R Markdown

## What is R Markdown

### Key points from the demo

* mixes text and code  
* human readable  
* YAML header between the  \-\-\-
* code chunk options control whether the code and its output end up in your 'knitted' document  
* comments   
  * in a code chunk the \# is still used for comments  
  * in the text a comment is written like this  &lt;!\-\- a comment \-\-&gt;
  * but use Ctrl+Shift+C  
* \# in the text indicate headings  



---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# How: Using Python in R Markdown

## Make your own R markdown doc

File | New File | R Markdown

--

Delete everything except:  
* the YAML header between the  \-\-\-  
* the first code chunk which begins:  
  ` ```{r setup, include=FALSE} `

--

Add your name, and a title 

You could copy and paste a title from [Classifiying_music.html](music_ml/Classifiying_music.html)

---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# How: Using Python in R Markdown

## Set up your default code chunk behaviour

That first code chunk is for setting some **default** code chunk options. 

I often use these:


````
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, 
                      warning = FALSE,
                      message = FALSE)
```
````
--

`echo = FALSE` means the code will not be included by default - this is normally what you want in a report.

--

However, I used `echo = TRUE` in [Classifiying_music.Rmd](music_ml/Classifiying_music.Rmd) so you could see the code.

Any output is included by default
 
---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# How: Using Python in R Markdown

## Start adding some text

Add a little introduction.  

You can make your own notes or copy and paste from [Classifiying_music.html](music_ml/Classifiying_music.html)  

**Save your file**

---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# How: Using Python in R Markdown

## Add an R chunk

There's one package you will definitely need: `reticulate`

We also also use `readxl`&lt;sup&gt;1&lt;/sup&gt; and `ggplot2`&lt;sup&gt;2&lt;/sup&gt; so let's add those too:

Use Insert | R to add a code chunk

````
```{r pkgs}
##########   R    ##########
library(reticulate)
library(readxl)
library(ggplot2)
```
````
.footnote[
[1] Wickham, H. Bryan, J. (2019). readxl: Read Excel Files. R package version 1.3.1. https://CRAN.R-project.org/package=readxl  
[2] Wickham, H. (2016) ggplot2: Elegant Graphics for Data Analysis. Springer-Verlag New York https://ggplot2.tidyverse.org
]

---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# How: Using Python in R Markdown

## Run a R chunk!

To run R commands interactively in a R Markdown document we need to run this code chunk.

Use the green arrow on the right of the chunk to run it.

![r pkgs code chunk with the run code green arrow on the right indicated](pics/run_chunk_r.png)

From now on 

&lt;span style=" font-weight: bold;    color: white !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: darkgreen !important;" &gt;RUN&lt;/span&gt;

means use the green button to run the chunk.

---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# How: Using Python in R Markdown

## Add a Python chunk

Now we'll add a chunk to import the Python modules we will need.

In Part 1, we will use the os module


Use Insert | Python to add a code chunk

.pull-left[

````
```{python mods}
########## PYTHON ##########
import os
```
````

]
.pull-right[

&lt;span style=" font-weight: bold;    color: white !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: darkgreen !important;" &gt;RUN&lt;/span&gt;
]

To use `os` methods interactively in later Python code chunks remember to run this code chunk.

--

We will add any other Python modules we need later.

---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# How: Using Python in R Markdown

## Part 1 Building our understanding

If you get the error:

This application has failed to start because it could not find or load the qt platform plugin "windows" in ""

You may need to check QT_PLUGIN_PATH (see earlier slide)

---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# How: Using Python in R Markdown

## Part 1 Building our understanding

You may want to add a header indicating this is Part 1 of the tutorial

--

A Python equivalent for R's `getwd()` is `getcwd()` from the `os` module.

If you have successfully imported the `os` module you can use it like this:


.pull-left[
````
```{python}
########## PYTHON ##########
os.getcwd()
```
 'C:\\Users\\Emma Rand\\Desktop\\useR2019\\useR2019_tutorial\\music_ml'
````
]
.pull-right[

&lt;span style=" font-weight: bold;    color: white !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: darkgreen !important;" &gt;RUN&lt;/span&gt;
]

--

It prints out! 

On a windows machine the 'windows-way' round slashes are escaped  
On a mac the path will be given 'correctly'

.footnote[
I found I needed `print(os.getcwd())` in previous versions of `reticulate`
]


---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# How: Using Python in R Markdown

## Part 1 Building our understanding

We can also use the the `getcwd()` method from `os` in a R chunk.

--

Remember, to access Python objects (of any sort) in R we use `py$`

Here we access the `os` object's methods 

--

BUT in a R-like way using the `$` not a `.`

.pull-left[

````
```{r}
##########   R    ##########
py$os$getcwd()

```
 [1] "C:\\Users\\Emma Rand\\Desktop\\useR2019\\useR2019_tutorial\\music_ml"
````
]
.pull-right[

&lt;span style=" font-weight: bold;    color: white !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: darkgreen !important;" &gt;RUN&lt;/span&gt;
]

---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# How: Using Python in R Markdown

## Part 1 Building our understanding

And we access R functions in Python chunks in a Python-like way

Can you do that? Add Python chunk and use R's `getwd()`

--

.pull-left[

````
```{python}
########## PYTHON ##########
r.getwd()
```
 'C:/Users/Emma Rand/Desktop/useR2019/useR2019_tutorial/music_ml'
````
]
.pull-right[

&lt;span style=" font-weight: bold;    color: white !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: darkgreen !important;" &gt;RUN&lt;/span&gt;
]


That's right! Though I'm not sure quite why you would!

--

üëÄ You might have noticed that the output of Python chunks doesn't include the element numbering [1] characteristic of R output.

---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# How: Using Python in R Markdown

## Part 1 Building our understanding

We will read one of the spectrum files to learn how to access dataframes in both sessions using `read_excel()` from `readxl`:

.pull-left[
````
```{r}
##########   R    ##########
spectrum &lt;- read_excel("Piano/01 Ballade No. 1, Op. 23_segments.xlsx")
```
````

]
.pull-right[

&lt;span style=" font-weight: bold;    color: white !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: darkgreen !important;" &gt;RUN&lt;/span&gt;
]

--

and check the dimensions of the dataframe:


.pull-left[
````
```{r}
##########   R    ##########
dim(spectrum)
```
[1]  100 5001
````
]
.pull-right[
&lt;span style=" font-weight: bold;    color: white !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: darkgreen !important;" &gt;RUN&lt;/span&gt;
]


---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# How: Using Python in R Markdown

## Part 1 Building our understanding

Can you use the üêç Pandas method `shape` in a new python chunk to achieve the same thing?

--

   Hint: the dataframe is `r.spectrum`

--

.pull-left[
````
```{python}
########## PYTHON ##########
r.spectrum.shape
```
(100, 5001)
````

]
.pull-right[

&lt;span style=" font-weight: bold;    color: white !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: darkgreen !important;" &gt;RUN&lt;/span&gt;
]

That's right!

---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# How: Using Python in R Markdown

## Part 1 Building our understanding

* 100 rows _i.e._, segments. 

* 5001 columns. The first column, "...1" is the segment label; the others are the 5000 features. They have the names "0" to "4999"

Using R to find the mean and s.d. of the second feature&lt;sup&gt;1&lt;/sup&gt;

.footnote[
[1] There's nothing specials about feature 2. I'm avoiding the first feature simply because it is atypical
]

.pull-left[

````
```{r}
##########   R    ##########
mean(spectrum$`1`)
sd(spectrum$`1`)

```
[1] 4422.34
[1] 5711.785
````

]
.pull-right[

&lt;span style=" font-weight: bold;    color: white !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: darkgreen !important;" &gt;RUN&lt;/span&gt;
]


---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# How: Using Python in R Markdown

## Part 1 Building our understanding

Can you use Python to achieve the same:

--

.pull-left[

````
```{python}
########## PYTHON ##########
r.spectrum["1"].mean()
r.spectrum["1"].std()
```
4422.34
5711.784974979717
````

]
.pull-right[

&lt;span style=" font-weight: bold;    color: white !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: darkgreen !important;" &gt;RUN&lt;/span&gt;
]

Well done!

---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# How: Using Python in R Markdown

## Part 1 Building our understanding

### Knit your Rmd

Now is good time to hit knit!
---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# How: Using Python in R Markdown

## Part 1 Building our understanding

Now read in the same file using Python.

--

You'll need to first add the `Pandas`&lt;sup&gt;1&lt;/sup&gt; module to your list of import statements in the Python chunk called mods

--

.pull-left[
````
```{python mods}
########## PYTHON ##########
import os
import pandas as pd
```
````

]
.pull-right[

&lt;span style=" font-weight: bold;    color: white !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: darkgreen !important;" &gt;RUN&lt;/span&gt;
]

.footnote[
[1] McKinney, W. (2010) Data Structures for Statistical Computing in Python, Proceedings of the 9th Python in Science Conference, 51-56 
]
---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# How: Using Python in R Markdown

## Part 1 Building our understanding

Read in the file:

.pull-left[
````
```{python}
########## PYTHON ##########
python_spectrum = pd.read_excel("Piano/01 Ballade No. 1, Op. 23_segments.xlsx")
```
````

]
.pull-right[

&lt;span style=" font-weight: bold;    color: white !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: darkgreen !important;" &gt;RUN&lt;/span&gt;
]

&lt;span style="     color: black !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: darkturquoise !important;" &gt;Extra exercises&lt;/span&gt;

---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# How: Using Python in R Markdown

## Part 2 Classification of audio data

### Data import
This will be carried out with Python. 

**Overivew**  
The nine "_segments.xlsx" files are read in to a single Pandas dataframe, `df_seg`.

This requires nested `for` loops to iterate through the directories and through the files in the directories. 

The information about the segments in "_SegmentInfo.xlsx" files are similarly read into a Pandas dataframe, `df_info` and a column is added to capture the instrument labeling.

You should be able to use and run the Python code without understanding how it works.

---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# How: Using Python in R Markdown

## Part 2 Classification of audio data

### Data import
Copy the importing code from: [Classifiying_music.html](music_ml/Classifiying_music.html)

Insert a new Python chunk and paste the code in

.pull-left[
````
```{python}
########## PYTHON ##########
dirs_to_use = ["Violin", "Piano", "Violin_and_Piano"]

df_seg = None
df_info = None
for d in dirs_to_use:
    for f in os.listdir(d):
    ... ... ...
    ... ... ... etc
    
```
````

]
.pull-right[

&lt;span style=" font-weight: bold;    color: white !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: darkgreen !important;" &gt;RUN&lt;/span&gt;
]

---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# How: Using Python in R Markdown

## Part 2 Classification of audio data

### Knit your Rmd

Now is good time to hit knit!

---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# How: Using Python in R Markdown

## Part 2 Classification of audio data

### Principal Component Analysis (PCA) in Python

You'll need to first PCA from the `scikit-learn`&lt;sup&gt;1&lt;/sup&gt; module to your list of import statements in the Python chunk called mods

.footnote[
[1] Pedregosa et al. (2011) Scikit-learn: Machine Learning in Python. JMLR 12: 2825-2830 http://jmlr.csail.mit.edu/papers/v12/pedregosa11a.html
]
--

.pull-left[
````
```{python mods}
########## PYTHON ##########
import os
import pandas as pd

# for PCA
from sklearn.decomposition.pca import PCA
```
````

]
.pull-right[

&lt;span style=" font-weight: bold;    color: white !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: darkgreen !important;" &gt;RUN&lt;/span&gt;
]



---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# How: Using Python in R Markdown

## Part 2: PCA in Python
The PCA is carried out with

.pull-left[
````
```{python}
########## PYTHON ##########
# Apply PCA
mdl = PCA()
new_data = mdl.fit_transform(df_seg)
    
```
````

]
.pull-right[

&lt;span style=" font-weight: bold;    color: white !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: darkgreen !important;" &gt;RUN&lt;/span&gt;
]

`new_data` contains the Principle Component scores

---

background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# How: Using Python in R Markdown

## Part 2: Visualising the üêç PCA

First using Python.

You'll need to first PCA from the `matplotlib.pyplot`&lt;sup&gt;1&lt;/sup&gt; module to your list of import statements in the Python chunk called mods

.footnote[
[1] Pedregosa et al. (2011) Scikit-learn: Machine Learning in Python. JMLR 12: 2825-2830 http://jmlr.csail.mit.edu/papers/v12/pedregosa11a.html
]
--

.pull-left[
````
```{python mods}
########## PYTHON ##########
import os
import pandas as pd

# for PCA
from sklearn.decomposition.pca import PCA
# for plotting
import matplotlib.pyplot as plt
```
````

]
.pull-right[

&lt;span style=" font-weight: bold;    color: white !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: darkgreen !important;" &gt;RUN&lt;/span&gt;
]

---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# How: Using Python in R Markdown

## Part 2: Visualising the üêç PCA

First using Python

Copy the Biplot code from: [Classifiying_music.html](music_ml/Classifiying_music.html)

Insert a new Python chunk and paste the code in
.pull-left[
````
```{python}
########## PYTHON ##########
p = df_info["Instrument"] == "Piano"
v = df_info["Instrument"] == "Violin"
pv = df_info["Instrument"] == "Violin_and_Piano"
plt.figure()
... ... ...
... ... ... etc
    
```
````

]
.pull-right[

&lt;span style=" font-weight: bold;    color: white !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: darkgreen !important;" &gt;RUN&lt;/span&gt;
]

You should see the Python plot in your file!

---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# How: Using Python in R Markdown

## Part 2: Visualising the üêç PCA

### Knit your Rmd

---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# How: Using Python in R Markdown

## Part 2: Visualising the üêç PCA

Now using R!

Insert a new R chunk: 
.pull-left[
````
```{r}
##########   R    ##########
df &lt;- data.frame(pca1 = py$new_data[ ,1],
                 pca2 = py$new_data[ ,2],
                 instrument = py$df_info$Instrument)

ggplot(data = df, aes(x = pca1, y = pca2, color = instrument)) +
  geom_point()
    
```
````

]
.pull-right[

&lt;span style=" font-weight: bold;    color: white !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: darkgreen !important;" &gt;RUN&lt;/span&gt;
]

You should see the R plot in your file!
---
background-image: url(pics/reticulated_python.png)
background-position: 95% 7%

# How: Using Python in R Markdown

## Part 2: Visualising the üêç PCA

### Knit your Rmd

Epic! Python and R plots in one doc!

---
# References and credits
Incomplete!!

SciPy (pronounced ‚ÄúSigh Pie‚Äù) is a Python-based ecosystem of open-source software for mathematics, science, and engineering. In particular, these are some of the core packages:

NumPy: Base N-dimensional array package  
SciPy library: Fundamental library for scientific computing  
Matplotlib: Comprehensive 2D Plotting  
IPython: Enhanced Interactive Console  
Sympy: Symbolic mathematics  
pandas: Data structures &amp; analysis  

Jones E, Oliphant E, Peterson P, et al. SciPy: Open Source Scientific Tools for Python, 2001-, http://www.scipy.org/ [Online; accessed 2019-07-03].

---

&lt;a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"&gt;&lt;img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /&gt;&lt;/a&gt;&lt;br /&gt;&lt;span xmlns:dct="http://purl.org/dc/terms/" property="dct:title"&gt;user2019 Tutorial: Taming Python to live in RStudio&lt;/span&gt; by &lt;span xmlns:cc="http://creativecommons.org/ns#" property="cc:attributionName"&gt;Emma Rand&lt;/span&gt; is licensed under a &lt;a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"&gt;Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License&lt;/a&gt;.
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
